
<html>
    <head>
        <meta charset="UTF-8">
        <link href="style.css" rel="stylesheet" />
        <script type="text/javascript" src="Java/jquery-3.6.0.js"></script>
        <script src="https://d3js.org/d3.v6.js"></script>
        <title>Migraci√≥n</title>
        <link rel="shortcut icon" type="image/png" href="flavicon.png"/>
        <style>
            #personitas{
                width: 50%;
                margin: 2%;
            }
            .boton-pais{
                width: 100%;
                height: 43px;

                cursor: pointer;
                margin: 10px auto;
                font-size: 30px;
                font-family: Lunchbox Regular;;
                padding: 5px 0px 0px 0px;
                color: #404347;
                background-color: #9cc2df80;
                box-shadow: -3px 3px #404347;
                border: 0px;
                border-radius: 5px ;
                margin-left: 1%;
                cursor: url("cursor/cursor_pointer.png"), auto;
                

            }
            #botondisc{
                width: 10%;
                height: 43px;

                cursor: pointer;
                margin: 10px auto;
                font-size: 15px;
                font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
                padding: 5px 0px 0px 0px;
                color: #404347;
                background-color: #9cc2df80;
                box-shadow: -3px 3px #404347;
                border: 0px;
                border-radius: 5px ;
                margin-left: 1%;
                float:right;

            }


            #botones{
                float: right;
                margin-right: 5%;
                margin-top: 1%;
            }
            #lista-botones{
                margin-top: 0px;
            }

        </style>
    </head>

    <body>
        <div id ="botones" >
            <ul id="lista-botones" style="list-style-type:none;">
            </ul>
        </div>
        <!--<button id="botondisc">Discriminado</button>-->
        <div id ="personitas" ></div>




        <script>
            //d3.csv("employee.csv", function(data) {
                //console.log(data)
                //console.log(data.length)
          
                    //console.log(true)
              //  console.log(data);

                
            //});
//        for (var i = 0; i < data.length; i++) {
  //      console.log(data[i].Name);
    //    console.log(data[i].Age);

   // }
//});

            $(document).ready(function(){
                function joinDeDatos(datos) {
                    svg
                      .selectAll("rect")
                      .data(datos)
                      .join("rect")
                      .attr("width", 50)
                      .attr("fill", "magenta")
                      .attr("height", (d) => d.porcentaje_migrantes_por_pais)
                      .attr("x", (_,i) => 50 + i *100);


                }
                
                //d3.csv("datos_migrantes_pais_discriminados.csv"), function(data)

              //  d3.csv("datos_migrantes_pais_discriminados.csv", function(data) {
                //    console.log(data)
                    
              //  })
                
                    //.then((datos) => {
                    //    console.log(datos);
                      //  joinDeDatos(datos);
                    //})
                    //.catch((error) => console.log(error));
                var box = document.querySelector('#personitas');
                var width = box.clientWidth;
                var height = box.clientHeight;
                var box1 = document.querySelector('#botones');
                var width1 = box1.clientWidth;

        
           
                d3.csv("datos_migrantes_pais_discriminados.csv", function(data) {
                    var li = document.createElement("LI");
                    var btn = document.createElement("BUTTON");
                    btn.innerHTML = data.pais;
                    $(btn).attr("class", "boton-pais")
                    $(btn).attr("id", data.pais);
                    li.append(btn)
                    $("#lista-botones").append(li)
                    //console.log(data)
                    //console.log(data.pais)
                    //console.log(parseFloat(data.porcentaje_migrantes_por_pais))
                    
                    
                    
                  //  for (var i = 0; i < (parseFloat(data.porcentaje_migrantes_por_pais) * 100); i++) {
                    //    console.log(i, data.pais);
                      //  var rect = document.createElement("P");
                  //      var pais = data.pais
                    //    $(rect).attr("id", pais);
                      //  $(rect).css("height", "50px");
                      //  $(rect).css("width", "50px");
                    //    $(rect).css("background", "magenta");
                    //    $(rect).css("position", "relative");
                      //  $("body").append(rect);
                        
                    




                //    };
                    contador = 0


                    for (var i = 0; i < (parseFloat(data.porcentaje_migrantes_por_pais) * 100); i++) {
                        //console.log(i, data.pais);
                        var rect = document.createElement("DIV");
                        var pais = data.pais
                        $(rect).attr("id", pais  + "personita");
                        $(rect).attr("class", "personita-pais " + data.pais)
                        //console.log(parseFloat(data.porcentaje_discriminado_por_pais_de_total) * 100)
                        if (contador < parseFloat(data.porcentaje_discriminado_por_pais_de_total) * 100){
                            $(rect).attr("class", "personita-pais " + data.pais + " discriminado")
                            contador += 1
                            //console.log("hola", data.pais)

                        };
                        $(rect).css("height", (width - width1)/13);
                        $(rect).css("width", (width - width1)/13);
                        $(rect).css("background", "#e1743d40");
                        $(rect).css("display", "inline-block");
                        $(rect).css("margin", "5px");
                        $(rect).css("border", "3px solid #e1743d40");
                        $(rect).css("border-radius", "80px");
                        $("#personitas").append(rect);

                    
                        
                    




                    };
                var botones = $(".boton-pais")
                var personitas = $(".personita-pais")
                botones.click(function(){
                    botones.css("background", "#9cc2df80")
                    $(this).css("background", "#e1743d")
                    botones.css("transition-duration", "0.2s")
                    var paisBoton = $(this).attr("id")
                    //console.log(paisBoton)
                    var personitasBoton = $("." + paisBoton)
                    var personitasDisBoton = $("." + paisBoton + ".discriminado")
                    $(personitas).css("background-color", "#e1743d40")
                    $(personitas).css("border", "3px solid #e1743d40");
                    $(personitasBoton).css("background-color", "#e1743d99")
                    $(personitasBoton).css("border", "3px solid #e1743d");
                    $(personitasDisBoton).css("border", "3px solid #9cc2df");
                    $(personitasDisBoton).css("background-color", "#9cc2df99")



                });



                });
            });

        </script>





    </body>
</html>
    