
<html>
    <head>
        <meta charset="UTF-8">
        <link href="style.css" rel="stylesheet" />
        <script type="text/javascript" src="Java/jquery-3.6.0.js"></script>
        <script type="text/javascript" src="script.js"></script>
        <script src="https://d3js.org/d3.v6.js"></script>
        <title>Migración</title>
        <link rel="shortcut icon" type="image/png" href="flavicon.png"/>


    </head>

    <body>
      <button class="ingresar" id='PDbtnN3' style="float:right;">¡Tema Completado!</button>
       

        <p> Alrededor de 4.611 hogares en Chile tienen migrantes, lo que equivale a un 6,5% del total de hogares del país.
            En estos hogares, habitan más de 98 mil niños inmigrantes de diferentes nacionalidades, de los cuales el  22,7% de niños viven en situación de pobreza, comparados al 13,7% de los niños nacidos en Chile viven en estas condiciones.</p>
        <p>“Del total de niños entre 0 y 14 años nacidos fuera de Chile, el 24% no asiste a educación básica. Esto corresponde a un total de 23 mil niños que no pueden ir al colegio, lo que equivale a la misma cantidad de personas que caben en 480 buses repletos de personas”.</p>
        <p>¿Sabías que...?

            “Aproximadamente 10.663 niños inmigrantes viven en situación de pobreza. Esta cantidad de niños equivale a la cantidad de personas que caben una cancha de fútbol lleno de personas”.</p>
        <script>
            //d3.csv("employee.csv", function(data) {
                //console.log(data)
                //console.log(data.length)

                    //console.log(true)
              //  console.log(data);


            //});
//        for (var i = 0; i < data.length; i++) {
  //      console.log(data[i].Name);
    //    console.log(data[i].Age);

   // }
//});

            $(document).ready(function(){
           //     $('#PDbtnN1').on('click', function () {

             //               $("#mainContent").empty();
            //                $( "#mainContent" ).load( "index.html" );

                $("#PDbtnN3").click(function(){
                    $("#loadD3").css("visibility", "visible")
                    $("#mainContent").empty();
                    $( "#mainContent" ).load( "page_niveles.html" );


                  //  $(linknav).attr("href", "pagedatos_nv1.html")





                });
                function joinDeDatos(datos) {
                    svg
                      .selectAll("rect")
                      .data(datos)
                      .join("rect")
                      .attr("width", 50)
                      .attr("fill", "magenta")
                      .attr("height", (d) => d.porcentaje_migrantes_por_pais)
                      .attr("x", (_,i) => 50 + i *100);


                }

                //d3.csv("datos_migrantes_pais_discriminados.csv"), function(data)

              //  d3.csv("datos_migrantes_pais_discriminados.csv", function(data) {
                //    console.log(data)

              //  })

                    //.then((datos) => {
                    //    console.log(datos);
                      //  joinDeDatos(datos);
                    //})
                    //.catch((error) => console.log(error));
                var box = document.querySelector('#personitas');
                var width = box.offsetWidth;
                var margin = getComputedStyle(box)
                var widthtot = width + margin
                var height = box.offsetHeight;
                var box1 = document.querySelector('#botones');
                var width1 = box1.clientWidth;
                lista_paises = []
                var caja = 1
                var cuenta = 1



                d3.csv("datos_migrantes_pais_discriminados.csv", function(data) {
                    var li = document.createElement("LI");
                    var btn = document.createElement("BUTTON");
                    btn.innerHTML = data.nombre;
                    $(btn).attr("class", "boton-pais")
                    $(btn).attr("id", data.pais);
                    li.append(btn)
                    $("#lista-botones").append(li)
                    lista_paises.push([data.pais, data.total_migrantes_por_pais, data.porcentaje_migrantes_por_pais,data.cantidad_discriminados_por_pais, data.porcentaje_discriminado_por_pais, data.porcentaje_discriminado_por_pais_de_total])


                    contador = 0
                    discriminados = 0

                    for (var i = 0; i < (parseFloat(data.porcentaje_migrantes_por_pais) * 100); i++) {
                        var rect = document.createElement("DIV");
                        var pais = data.pais
                        $(rect).attr("id", pais  + "personita");
                        $(rect).attr("class", "personita-pais " + data.pais)
                        var color = "#e1743d40"
                        var borde = "#e1743d40"
                        if (contador < parseFloat(data.porcentaje_discriminado_por_pais_de_total) * 100){
                            $(rect).attr("class", "personita-pais " + data.pais + " discriminado")
                   //         var color = "#9cc2df40"
                     //       var borde = "#9cc2df40"
                            contador += 1
                            discriminados += 1
                        };

                        $(rect).css("height", (width - width1)/13);
                        $(rect).css("width", (width - width1)/13);
                        $(rect).css("background", color);
                        $(rect).css("display", "inline-block");
                        $(rect).css("margin", "2px");
                        $(rect).css("border", "3px solid " + borde);
                        $(rect).css("border-radius", "80px");
                        $("#personitas" + caja.toString()).append(rect);
                        $("#info-escrita").css("width", "80%")
                        $("#info-escrita").css("height", widthtot)
                        $("#info-escrita").css("background-color", "#e1743d20")
                        $("#info-escrita").css("border-radius", "10px")

                        console.log(contador)
                        if (cuenta == 10) {
                            caja += 1
                            cuenta = 0
                            console.log("holaaaaa")
                        };
                        cuenta += 1
                    };

                var botones = $(".boton-pais")
                var personitas = $(".personita-pais")
                botones.click(function(){
                    botones.css("background", "#9cc2df80")
                    $(this).css("background", "#e1743d")
                    botones.css("transition-duration", "0.2s")
                    var paisBoton = $(this).attr("id")
                    //console.log(paisBoton)
                    var personitasBoton = $(".personita-pais." + paisBoton)
                    var personitasDisBoton = $("." + paisBoton + ".discriminado.personita-pais")
                    $(personitas).css("background-color", "#e1743d40")
                    $(personitas).css("border", "3px solid #e1743d40");
                    $(personitasBoton).css("background-color", "#e1743d99")
                    $(personitasBoton).css("border", "3px solid #e1743d");
                    $(personitasDisBoton).css("border", "3px solid #9cc2df");
                    $(personitasDisBoton).css("background-color", "#9cc2df99")

                    for (var i = 0; i < lista_paises.length; i++) {
                        console.log(lista_paises[i][0], "for i")
                        console.log(paisBoton, "boton")
                        if (lista_paises[i][0] == paisBoton) {
                            console.log("funcionaaa")
                            var n_total = lista_paises[i][1]
                            var n_discriminados = lista_paises[i][3]

                        };
                    var banderas = $(".bandera")

                    var bandera_pais = $(".bandera." + paisBoton)
                    $(banderas).css("visibility", "hidden")
                    $(bandera_pais).css("visibility", "visible")


                    };
                    $("#numero-personas").text(n_total)
                    $("#numero-personas-disc").text(n_discriminados)
                });
                });
            });
            var audio = document.getElementById("sonidofondo");
              audio.volume = 0.28;

        </script>





    </body>
</html>
